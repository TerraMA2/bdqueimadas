define("components/Utils",[],function(){var t=null,e=null,o=function(){return t},a=function(){return e},n=function(t,e){var o=e,a=("0"+t.getDate()).slice(-2),n=("0"+(t.getMonth()+1)).slice(-2),i=t.getFullYear().toString();return e.match(/YYYY/)&&(o=o.replace("YYYY",i)),e.match(/MM/)&&(o=o.replace("MM",n)),e.match(/DD/)&&(o=o.replace("DD",a)),o},i=function(t,e){var o=e.indexOf("YYYY"),a=e.indexOf("MM"),n=e.indexOf("DD"),i=t.substring(o,o+4),r=t.substring(a,a+2),t=t.substring(n,n+2),s=new Date(i+"-"+r+"-"+t+" UTC-03:00");return s},r=function(t){var e=t;if(null!==t&&void 0!==t){var o=t.match("{{(.*)}}");if(null!==o){var a=o[1].split("="),i=a[1],r=new Date;if("0"!==a[0]){var s=a[0].split(",");$.each(s,function(t,e){var o=e.split("|"),a=o[0],n=parseInt(o[1]),i=o[2].toLowerCase();switch(i){case"d":"+"===a?r.setDate(r.getDate()+n):r.setDate(r.getDate()-n);break;case"m":"+"===a?r.setMonth(r.getMonth()+n):r.setMonth(r.getMonth()-n);break;case"y":"+"===a?r.setFullYear(r.getFullYear()+n):r.setFullYear(r.getFullYear()-n)}})}e=n(r,i),e=t.replace(o[0],e)}}return e},s=function(t,e){for(var o=0;o<t.length;o++)if(t[o].toString()===e.toString())return!0;return!1},l=function(t,e){var o=[];e=null===e||void 0===e||"asc"!==e&&"desc"!==e?"asc":e;for(var a in t)o.push({key:a,value:t[a]});return o.sort(function(t,o){var a=parseInt(t.value),n=parseInt(o.value);return a>n?"asc"===e?1:-1:n>a?"asc"===e?-1:1:0}),o},u=function(o){t=o,e=io(window.location.origin)};return{getSocket:a,getConfigurations:o,dateToString:n,stringToDate:i,processStringWithDatePattern:r,stringInArray:s,sortIntegerArray:l,init:u}}),define("components/Filter",["components/Utils","TerraMA2WC/components/MapDisplay.TerraMA2WebComponents"],function(t,e){var o=null,a=null,n="all",i=function(e){return t.dateToString(o,e)},r=function(e){return t.dateToString(a,e)},s=function(t){n=t},l=function(){return n},u=function(){var e=t.getConfigurations().filterConfigurations.LayerToFilter.DateFieldName+">="+t.dateToString(o,t.getConfigurations().filterConfigurations.LayerToFilter.DateFormat);return e+=" and ",e+=t.getConfigurations().filterConfigurations.LayerToFilter.DateFieldName+"<="+t.dateToString(a,t.getConfigurations().filterConfigurations.LayerToFilter.DateFormat)},c=function(e,n,i){o=t.stringToDate(e,i),a=t.stringToDate(n,i),o.setHours(0,0,0,0),a.setHours(0,0,0,0),$("#filter-date-from").val(t.dateToString(o,"DD/MM/YYYY")),$("#filter-date-to").val(t.dateToString(a,"DD/MM/YYYY"))},d=function(){o=new Date,a=new Date,o.setHours(o.getHours()-24),o.setHours(0,0,0,0),a.setHours(0,0,0,0)},p=function(){var e=t.getConfigurations().filterConfigurations.LayerToFilter.SatelliteFieldName+"='"+n+"'";return e},m=function(i,r,s){var l="";i.length>0&&r.length>0&&(c(i,r,"DD/MM/YYYY"),l+=u(),$.each(t.getConfigurations().filterConfigurations.CurrentSituationLayers.Layers,function(e,i){g(t.dateToString(o,"YYYYMMDD"),t.dateToString(a,"YYYYMMDD"),$("#countries-title").attr("item-id"),n,i)})),i.length>0&&r.length>0&&"all"!==s&&(l+=" AND "),"all"!==s&&(l+=p()),f(),e.applyCQLFilter(l,t.getConfigurations().filterConfigurations.LayerToFilter.LayerId)},g=function(t,o,a,n,i){var r="begin:"+t+";end:"+o;void 0!==a&&null!==a&&""!==a&&""!==a&&(r+=";country:"+a),void 0!==n&&null!==n&&""!==n&&""!==n&&"all"!==n&&(r+=";satellite:"+n),e.updateLayerSourceParams(i,{viewparams:r})},f=function(){var e=($("#filter-satellite").value,'<option value="all">TODOS</option>'),i=t.getConfigurations().filterConfigurations.Satellites;$.each(i,function(t,i){var r=new Date(i.Begin+" UTC-03:00"),s=new Date(i.End+" UTC-03:00");r.setHours(0,0,0,0),s.setHours(0,0,0,0),o>=r&&s>=a||o>=r&&i.Current?e+=n===i.Name?'<option value="'+i.Name+'" selected>'+i.Name+"</option>":'<option value="'+i.Name+'">'+i.Name+"</option>":n===i.Name&&(e+='<option value="'+i.Name+'" selected>'+i.Name+"</option>")}),$("#filter-satellite").empty().html(e)},h=function(e,o){t.getSocket().emit("spatialFilterRequest",{id:e,text:o,key:"Continent"})},C=function(e,o){t.getSocket().emit("continentByCountryRequest",{country:e}),t.getSocket().emit("spatialFilterRequest",{id:e,text:o,key:"Country"})},b=function(e,o){t.getSocket().emit("continentByStateRequest",{state:e}),t.getSocket().emit("countryByStateRequest",{state:e}),t.getSocket().emit("spatialFilterRequest",{id:e,text:o,key:"State"})},y=function(t,e,o){$("#"+t+"-title").empty().html(e),$("#"+t+"-title").attr("item-id",o),$("#"+t+"-dropdown").removeClass("open"),$("#"+t+"-dropdown").removeClass("dropdown-closed")},v=function(t,e,o){$("#"+t+"-title").empty().html(e),$("#"+t+"-title").attr("item-id",o),$("#"+t+"-dropdown").removeClass("open"),$("#"+t+"-dropdown").hasClass("dropdown-closed")||$("#"+t+"-dropdown").addClass("dropdown-closed")},x=function(){y("continents","Continentes",""),v("countries","Pa&iacute;ses",""),$("#countries").empty(),v("states","Estados",""),$("#states").empty()},D=function(){$(document).ready(function(){d(),t.getSocket().emit("spatialFilterRequest",{id:"South America",text:"South America",key:"Continent"})})};return{getFormattedDateFrom:i,getFormattedDateTo:r,setSatellite:s,getSatellite:l,updateDates:c,updateDatesToCurrent:d,applyFilter:m,applyCurrentSituationFilter:g,selectContinentItem:h,selectCountryItem:C,selectStateItem:b,enableDropdown:y,disableDropdown:v,resetDropdowns:x,init:D}}),define("components/AttributesTable",["components/Utils","components/Filter","TerraMA2WC/components/MapDisplay.TerraMA2WebComponents"],function(t,e,o){var a=null,n=function(){for(var e=t.getConfigurations().attributesTableConfigurations.Columns,o=e.length,a=[],n=0;o>n;n++)e[n].Show&&a.push({name:e[n].Name});return a},i=function(){for(var i=t.getConfigurations().attributesTableConfigurations.Columns,r=i.length,s="",l=0;r>l;l++)s+=i[l].Show?"<th>"+(""!==i[l].Alias?i[l].Alias:i[l].Name)+"</th>":"";$("#attributes-table").empty().append("<thead>"+s+"</thead><tfoot>"+s+"</tfoot>"),a=$("#attributes-table").DataTable({order:[[5,"asc"],[6,"asc"]],processing:!0,serverSide:!0,ajax:{url:"/get-attributes-table",type:"POST",data:function(t){t.dateFrom=e.getFormattedDateFrom("YYYYMMDD"),t.dateTo=e.getFormattedDateTo("YYYYMMDD"),t.satellite="all"!==e.getSatellite()?e.getSatellite():"",t.extent=o.getCurrentExtent()}},columns:n(),language:{emptyTable:"<p class='text-center'>Nenhum registro a ser exibido</p>",info:"Exibindo _START_ at&eacute; _END_ de _TOTAL_ registros",infoEmpty:"Exibindo 0 at&eacute; 0 de 0 registros",infoFiltered:"(filtrado de _MAX_ registros)",lengthMenu:"Exibir _MENU_ registros",loadingRecords:"Carregando...",processing:"Processando...",search:"Pesquisa:",zeroRecords:"<p class='text-center'>Nenhum registro encontrado</p>",paginate:{first:"Primeira",last:"&Uacute;ltima",next:"Pr&oacute;xima",previous:"Anterior"}}})},r=function(){$("#table-box").css("left")<"0px"&&a.ajax.reload()},s=function(){$(document).ready(function(){i()})};return{updateAttributesTable:r,init:s}}),define("components/Map",["components/Utils","components/Filter","TerraMA2WC/components/MapDisplay.TerraMA2WebComponents","TerraMA2WC/components/LayerExplorer.TerraMA2WebComponents"],function(t,e,o,a){var n=function(){var n=t.getConfigurations().mapConfigurations;$.each(n.LayerGroups,function(n,i){o.addLayerGroup(i.Id,i.Name)&&a.addLayersFromMap(i.Id,"terrama2-layerexplorer"),$.each(i.Layers,function(n,r){var s=t.processStringWithDatePattern(r.Name),l=t.processStringWithDatePattern(r.Time);if(o.addTileWMSLayer(r.Url,r.ServerType,r.Id,s,r.Visible,r.MinResolution,r.MaxResolution,i.Id,l)&&a.addLayersFromMap(r.Id,i.Id),r.Id===t.getConfigurations().filterConfigurations.LayerToFilter.LayerId){var u=t.processStringWithDatePattern(t.getConfigurations().filterConfigurations.LayerToFilter.InitialDate),c=t.processStringWithDatePattern(t.getConfigurations().filterConfigurations.LayerToFilter.FinalDate),d=t.getConfigurations().filterConfigurations.LayerToFilter.DateFieldName+">="+u+" and "+t.getConfigurations().filterConfigurations.LayerToFilter.DateFieldName+"<="+c+" and "+t.getConfigurations().filterConfigurations.LayerToFilter.SatelliteFieldName+"='AQUA_M-T'";o.applyCQLFilter(d,r.Id),e.updateDates(u,c,t.getConfigurations().filterConfigurations.LayerToFilter.DateFormat)}else if(t.stringInArray(t.getConfigurations().filterConfigurations.CurrentSituationLayers.Layers,r.Id)){var u=t.processStringWithDatePattern(t.getConfigurations().filterConfigurations.CurrentSituationLayers.InitialDate),c=t.processStringWithDatePattern(t.getConfigurations().filterConfigurations.CurrentSituationLayers.FinalDate);e.applyCurrentSituationFilter(u,c,$("#countries-title").attr("item-id"),"AQUA_M-T",r.Id)}})})},i=function(){o.unsetMapSingleClickEvent(),o.removeZoomDragBox(),$(".mouse-function-btn > i").removeClass("active"),$("#terrama2-map").removeClass("cursor-crosshair"),$("#terrama2-map").removeClass("cursor-move"),$("#terrama2-map").removeClass("cursor-pointer")},r=function(){$("#moveMap > i").addClass("active"),$("#terrama2-map").addClass("cursor-move")},s=function(){t.getSocket().emit("spatialFilterRequest",{id:"South America",text:"South America",key:"Continent"})},l=function(){$("#dragbox > i").addClass("active"),$("#terrama2-map").addClass("cursor-crosshair"),o.addZoomDragBox()},u=function(){var e="",o=t.getConfigurations().mapConfigurations;$.each(o.Subtitles,function(t,o){e+='<li class="'+o.LayerId.replace(":","")+'"><a><span style="font-weight: bold;">'+o.LayerName+"</span></a></li>",$.each(o.Subtitles,function(t,a){var n="";null!==a.FillColor&&(n+="background-color: "+a.FillColor+";"),null!==a.BorderColor&&(n+="border: solid 2px "+a.BorderColor+";"),null!==a.Image&&(n+="background: url("+a.Image+");background-size: 15px;background-position: center;background-repeat: no-repeat;"),e+='<li class="'+o.LayerId.replace(":","")+'"><a><div style="'+n+'"></div><span>'+a.SubtitleText+"</span></a></li>"})}),$("#map-subtitle-items").append(e),c(),m(!1)},c=function(e){var a=t.getConfigurations().mapConfigurations;$.each(a.Subtitles,function(t,a){(void 0===e||e===a.LayerId)&&(o.isCurrentResolutionValidForLayer(a.LayerId)&&o.isLayerVisible(a.LayerId)?d(a.LayerId):p(a.LayerId))})},d=function(t){$("#map-subtitle-items > li."+t.replace(":","")).is(":visible")||$("#map-subtitle-items > li."+t.replace(":","")).show(),m(!1)},p=function(t){$("#map-subtitle-items > li."+t.replace(":","")).is(":visible")&&$("#map-subtitle-items > li."+t.replace(":","")).hide(),m(!1)},m=function(t){$(".map-subtitle-toggle").parent().parent().parent().hasClass("collapsed-box")||!t?$("#terrama2-map .ol-zoom").animate({top:"221px"},{duration:500,queue:!1}):$("#terrama2-map .ol-zoom").animate({top:"70px"},{duration:500,queue:!1})},g=function(){$(document).ready(function(){n(),u()})};return{resetMapMouseTools:i,initialExtent:s,activateDragboxTool:l,activateMoveMapTool:r,setSubtitlesVisibility:c,updateZoomTop:m,init:g}}),define("components/Graphics",["components/Utils","components/Filter","components/Map","TerraMA2WC/components/MapDisplay.TerraMA2WebComponents"],function(t,e,o,a){var n={},i=function(){$("#show-time-series-graphic > i").hasClass("active")?(o.resetMapMouseTools(),o.activateMoveMapTool()):(o.resetMapMouseTools(),$("#show-time-series-graphic > i").addClass("active"),$("#terrama2-map").addClass("cursor-pointer"),a.setMapSingleClickEvent(function(t,e){r(t,e,"2000-01","2000-12")}))},r=function(e,o,a,i){var r=new wtss(t.getConfigurations().graphicsConfigurations.TimeSeries.URL);r.time_series({coverage:t.getConfigurations().graphicsConfigurations.TimeSeries.Coverage,attributes:t.getConfigurations().graphicsConfigurations.TimeSeries.Attributes,longitude:e,latitude:o,start:a,end:i},function(t){if(void 0===t.result)throw new Error("Time Series Server Error!");var e={labels:t.result.timeline,datasets:[{label:"Séries Temporais",fillColor:"rgba(220,220,220,0.2)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:t.result.attributes[0].values}]};$("#time-series-dialog").dialog({width:855,height:480,resizable:!1,closeOnEscape:!0,closeText:"",position:{my:"top",at:"top+15"}});var o=$("#time-series").get(0).getContext("2d");void 0!==n.timeSeries&&null!==n.timeSeries&&n.timeSeries.destroy(),n.timeSeries=new Chart(o).Line(e,{responsive:!0,maintainAspectRatio:!0})})},s=function(){if($("#graph-box").css("left")<"0px"){var o=e.getFormattedDateFrom("YYYYMMDD"),n=e.getFormattedDateTo("YYYYMMDD"),i="all"!==e.getSatellite()?e.getSatellite():"",r=a.getCurrentExtent();$.each(t.getConfigurations().graphicsConfigurations.FiresCount,function(e,a){t.getSocket().emit("graphicsFiresCountRequest",{dateFrom:o,dateTo:n,key:a.Key,title:a.Title,satellite:i,extent:r})})}},l=function(t){if(void 0===n[t.key]){var e='<div class="box box-default graphic-item"><div class="box-header with-border"><h3 class="box-title">'+t.title+'</h3><div class="box-tools pull-right"><button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button></div></div><div class="box-body" style="display: block;"><div class="chart"><canvas id="fires-count-by-'+t.key+'-graphic" style="height: 300px;"></canvas><div id="fires-count-by-'+t.key+'-graphic-message-container" class="text-center"></div></div></div></div>';$("#graphics-container").append(e),n[t.key]=null}if(t.firesCount.rowCount>0){var o=[],a=[];$.each(t.firesCount.rows,function(t,e){o.push(e.key),a.push(e.count)});var i={labels:o,datasets:[{fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,0.8)",highlightFill:"rgba(151,187,205,0.75)",highlightStroke:"rgba(151,187,205,1)",data:a}]};void 0!==n[t.key]&&null!==n[t.key]&&n[t.key].destroy(),$("#fires-count-by-"+t.key+"-graphic-message-container").hide(),$("#fires-count-by-"+t.key+"-graphic").show();var r=$("#fires-count-by-"+t.key+"-graphic").get(0).getContext("2d");n[t.key]=new Chart(r).Bar(i,{responsive:!0,maintainAspectRatio:!1})}else $("#fires-count-by-"+t.key+"-graphic").hide(),$("#fires-count-by-"+t.key+"-graphic-message-container").show(),$("#fires-count-by-"+t.key+"-graphic-message-container").html("Não existem dados a serem exibidos!")},u=function(){$(document).ready(function(){s()})};return{setTimeSeriesTool:i,updateGraphics:s,loadFiresCountGraphic:l,init:u}}),define("BDQueimadas",["components/Utils","components/Filter","components/AttributesTable","components/Graphics","components/Map","TerraMA2WC/components/MapDisplay.TerraMA2WebComponents"],function(t,e,o,a,n,i){var r=null,s=null,l=null,u=null,c=12,d=null,p=function(){o.updateAttributesTable(),a.updateGraphics()},m=function(){$(".sidebar-menu > li").on("click",function(t){t.preventDefault();var e=$(this).attr("box"),o=$(this).attr("id");if(""!==e&&void 0!==e){var a=$("#"+e).hasClass("active");v(),C(),a||(h(o,e),b(e,$(this).text().trim()))}else{var a=$("#left-content-box-background").hasClass("active"),n=$("#left-content-box-background").attr("leftContentBoxButton");v(),C(),n===o&&a||h(o,"")}}),$(".sidebar-toggle").on("click",function(){if(x(),$(this).hasClass("begin")&&($("#welcome").animate({opacity:"0"},{duration:300,queue:!1}),window.setTimeout(function(){$("#welcome").css("display","none")},300),$("#main-sidebar-toggle").css("display","")),$(".left-content-box").hasClass("active")){var t=$("#"+$("#left-content-box-background").attr("leftContentBoxButton")).attr("box");y(t)}$("#left-content-box-background").hasClass("active")&&y("left-content-box-background"),$("body").hasClass("sidebar-collapse")?($("#terrama2-map").removeClass("fullmenu"),S(300)):($("#terrama2-map").addClass("fullmenu"),D(300)),i.updateMapSize()}),$(window).resize(function(){v(),C(),x(),$("body").hasClass("sidebar-collapse")?S(0):D(0),$(".main-sidebar").attr("style","padding-top: "+$(".main-header").outerHeight()+"px"),i.updateMapSize()}),$("#control-sidebar-btn").on("click",function(){$(".control-sidebar").hasClass("control-sidebar-open")?($(".ol-zoom").animate({right:"60px"},{duration:300,queue:!1}),$(".ol-attribution").animate({right:"60px"},{duration:300,queue:!1}),$("#map-subtitle").animate({right:"45px"},{duration:300,queue:!1})):($(".ol-zoom").animate({right:"15px"},{duration:300,queue:!1}),$(".ol-attribution").animate({right:"15px"},{duration:300,queue:!1}),$("#map-subtitle").animate({right:"0"},{duration:300,queue:!1}))}),$(document).on("change","#exportation-type",function(){if(""!==$(this).val()){var t="/export?dateFrom="+e.getFormattedDateFrom("YYYYMMDD")+"&dateTo="+e.getFormattedDateTo("YYYYMMDD")+"&extent="+i.getCurrentExtent().toString()+"&format="+$(this).val();location.href=t,vex.close()}}),$("#export").on("click",function(){$.ajax({url:"/exists-data-to-export",type:"GET",data:{dateFrom:e.getFormattedDateFrom("YYYYMMDD"),dateTo:e.getFormattedDateTo("YYYYMMDD"),extent:i.getCurrentExtent().toString()},success:function(t){t.existsDataToExport?vex.dialog.alert({message:'<select id="exportation-type" class="form-control"><option value="">Selecione o formato</option><option value="geojson">GeoJSON</option><option value="shapefile">Shapefile</option><option value="csv">CSV</option></select>',buttons:[{type:"submit",text:"Cancelar",className:"bdqueimadas-btn"}]}):vex.dialog.alert({message:'<p class="text-center">Não existem dados para exportar!</p>',buttons:[{type:"submit",text:"Ok",className:"bdqueimadas-btn"}]})}})}),$("#filter-button").on("click",function(t){var o=$("#filter-date-from").val(),a=$("#filter-date-to").val();e.setSatellite($("#filter-satellite").val()),o.length>0&&a.length>0||0===o.length&&0===a.length?(0===o.length&&0===a.length&&(e.updateDatesToCurrent(),a=e.getFormattedDateTo("DD/MM/YYYY"),o=e.getFormattedDateFrom("DD/MM/YYYY")),e.applyFilter(o,a,e.getSatellite()),p()):(0===o.length&&$("#filter-date-from").parent(":not([class*='has-error'])").addClass("has-error"),0===a.length&&$("#filter-date-to").parent(":not([class*='has-error'])").addClass("has-error"))}),$(".continent-item").on("click",function(){t.getSocket().emit("spatialFilterRequest",{id:$(this).attr("id"),text:$(this).text(),key:"Continent"})}),$(document).on("click",".country-item",function(){t.getSocket().emit("spatialFilterRequest",{id:$(this).attr("id"),text:$(this).text(),key:"Country"})}),$(document).on("click",".state-item",function(){t.getSocket().emit("spatialFilterRequest",{id:$(this).attr("id"),text:$(this).text(),key:"State"})}),$(".filter-date").on("focus",function(t){$(this).parent().hasClass("has-error")&&$(this).parent().removeClass("has-error")}),$("#updateComponents").on("click",function(){p()}),$("#show-time-series-graphic").on("click",function(){a.setTimeSeriesTool()}),$("#dragbox").on("click",function(){n.resetMapMouseTools(),n.activateDragboxTool()}),$("#moveMap").on("click",function(){n.resetMapMouseTools(),n.activateMoveMapTool()}),$("#initialExtent").on("click",function(){n.resetMapMouseTools(),n.initialExtent(),n.activateMoveMapTool(),e.resetDropdowns()}),$(".map-subtitle-toggle").on("click",function(){n.updateZoomTop(!0)}),i.setZoomDragBoxEndEvent(function(){var t=i.getZoomDragBoxExtent();i.zoomToExtent(t),p()}),i.setMapResolutionChangeEvent(function(){n.setSubtitlesVisibility()}),i.setMapDoubleClickEvent(function(e,o){t.getSocket().emit("dataByIntersectionRequest",{longitude:e,latitude:o,resolution:i.getCurrentResolution()})}),i.setLayerVisibilityChangeEvent(function(t){n.setSubtitlesVisibility(t)})},g=function(){t.getSocket().on("spatialFilterResponse",function(o){if(o.extent.rowCount>0){var a=o.extent.rows[0].extent.replace("BOX(","").replace(")","").split(","),n=a[0].split(" ");n=n.concat(a[1].split(" ")),i.zoomToExtent(n),p(),"Continent"===o.key?(t.getSocket().emit("countriesByContinentRequest",{continent:o.id}),e.enableDropdown("continents",o.text,o.id),e.enableDropdown("countries","Pa&iacute;ses",""),e.disableDropdown("states","Estados","")):"Country"===o.key?(t.getSocket().emit("statesByCountryRequest",{country:o.id}),e.enableDropdown("countries",o.text,o.id),e.enableDropdown("states","Estados",""),$.each(t.getConfigurations().filterConfigurations.CurrentSituationLayers.Layers,function(t,a){e.applyCurrentSituationFilter(e.getFormattedDateFrom("YYYYMMDD"),e.getFormattedDateTo("YYYYMMDD"),o.id,e.getSatellite(),a)})):e.enableDropdown("states",o.text,o.id)}else i.zoomToInitialExtent()}),t.getSocket().on("dataByIntersectionResponse",function(o){o.data.rowCount>0?"States"===o.data.rows[0].key?e.selectStateItem(o.data.rows[0].id,o.data.rows[0].name):"Countries"===o.data.rows[0].key?(e.selectCountryItem(o.data.rows[0].id,o.data.rows[0].name),$.each(t.getConfigurations().filterConfigurations.CurrentSituationLayers.Layers,function(t,a){e.applyCurrentSituationFilter(e.getFormattedDateFrom("YYYYMMDD"),e.getFormattedDateTo("YYYYMMDD"),o.data.rows[0].id,e.getSatellite(),a)})):e.selectContinentItem(o.data.rows[0].id,o.data.rows[0].name):t.getSocket().emit("spatialFilterRequest",{id:"South America",text:"South America",key:"Continent"}),p()}),t.getSocket().on("continentByCountryResponse",function(e){$("#continents-title").empty().html(e.continent.rows[0].name),t.getSocket().emit("countriesByContinentRequest",{continent:e.continent.rows[0].id})}),t.getSocket().on("continentByStateResponse",function(t){$("#continents-title").empty().html(t.continent.rows[0].name)}),t.getSocket().on("countryByStateResponse",function(o){e.enableDropdown("countries",o.country.rows[0].name,o.country.rows[0].id),t.getSocket().emit("statesByCountryRequest",{country:o.country.rows[0].id});for(var a="",n=o.countries.rowCount,i=0;n>i;i++)a+="<li class='country-item' id='"+o.countries.rows[i].id+"'><a href='#'>"+o.countries.rows[i].name+"</a></li>";$("#countries").empty().html(a),$.each(t.getConfigurations().filterConfigurations.CurrentSituationLayers.Layers,function(t,a){e.applyCurrentSituationFilter(e.getFormattedDateFrom("YYYYMMDD"),e.getFormattedDateTo("YYYYMMDD"),o.country.rows[0].id,e.getSatellite(),a)})}),t.getSocket().on("countriesByContinentResponse",function(t){for(var e="",o=t.countries.rowCount,a=0;o>a;a++)e+="<li class='country-item' id='"+t.countries.rows[a].id+"'><a href='#'>"+t.countries.rows[a].name+"</a></li>";$("#countries").empty().html(e)}),t.getSocket().on("statesByCountryResponse",function(t){for(var e="",o=t.states.rowCount,a=0;o>a;a++)e+="<li class='state-item' id='"+t.states.rows[a].id+"'><a href='#'>"+t.states.rows[a].name+"</a></li>";$("#states").empty().html(e)}),t.getSocket().on("graphicsFiresCountResponse",function(t){a.loadFiresCountGraphic(t)})},f=function(){$(".date").inputmask("dd/mm/yyyy",{placeholder:"dd/mm/aaaa"}),$(".date").datepicker({dateFormat:"dd/mm/yyyy",dayNames:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],dayNamesMin:["D","S","T","Q","Q","S","S","D"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],nextText:"Próximo",prevText:"Anterior"})},h=function(t,e){var o="",a="";o=""!==e&&$("#"+e).hasClass("fullscreen")?"100%":"370px",a=$("body").hasClass("sidebar-collapse")?"30px":"210px",$("#left-content-box-background").addClass("active"),$("#left-content-box-background").attr("leftContentBoxButton",t),$("#left-content-box-background").animate({width:o,left:a},{duration:300,queue:!1})},C=function(){$("#left-content-box-background").removeClass("active"),$("#left-content-box-background").animate({width:"350px",left:"-350px"},{duration:300,queue:!1}),$("#left-content-box-background").attr("leftContentBoxButton","")},b=function(t,e){$("#"+t).addClass("active"),$("body").hasClass("sidebar-collapse")?$("#"+t).animate({left:"50px"},{duration:300,queue:!1}):($("#"+t).hasClass("fullscreen")&&$("#"+t).addClass("fullmenu"),$("#"+t).animate({left:"230px"},{duration:300,queue:!1})),$(".content-header > h1").html(e)},y=function(t){"230px"===$("#"+t).css("left")?($("#"+t).animate({left:"50px"},{duration:250,queue:!1}),$("#"+t).hasClass("fullscreen")&&$("#"+t).removeClass("fullmenu")):"210px"===$("#"+t).css("left")?($("#"+t).animate({left:"30px"},{duration:250,queue:!1}),$("#"+t).hasClass("fullscreen")&&$("#"+t).removeClass("fullmenu")):"50px"===$("#"+t).css("left")?($("#"+t).animate({left:"230px"},{duration:400,queue:!1}),$("#"+t).hasClass("fullscreen")&&$("#"+t).addClass("fullmenu")):($("#"+t).animate({left:"210px"},{duration:400,queue:!1}),$("#"+t).hasClass("fullscreen")&&$("#"+t).addClass("fullmenu"))},v=function(){$(".content-header > h1").html("Banco de Dados de Queimadas"),$(".left-content-box").removeClass("active"),$(".left-content-box").removeClass("fullmenu"),$(".left-content-box").animate({left:"-100%"},{duration:300,queue:!1})},x=function(){r=$(window).outerHeight(),s=$(".main-header").outerHeight(),l=$(".navbar").outerHeight(),u=$(".content-wrapper > .content-header").outerHeight(),d=$("#map-subtitle").outerHeight()},D=function(t){$(".content-wrapper").animate({"min-height":r-(s+c)+"px"},{duration:t,queue:!1}),$("#terrama2-map").animate({height:r-(s+u+c)+"px"},{duration:t,queue:!1}),$(".left-content-box").animate({height:r-(s+u+c)+"px","margin-top":s+u+"px"},{duration:t,queue:!1}),$(".control-sidebar").animate({"padding-top":s+u+"px"},{duration:t,queue:!1})},S=function(t){$(".content-wrapper").animate({"min-height":r-(l+c)+"px"},{duration:t,queue:!1}),$("#terrama2-map").animate({height:r-(l+u+c)+"px"},{duration:t,queue:!1}),$(".left-content-box").animate({height:r-(l+u+c)+"px","margin-top":l+u+"px"},{duration:t,queue:!1}),$(".control-sidebar").animate({"padding-top":l+u+"px"},{duration:t,queue:!1})},M=function(){$(document).ready(function(){x(),D(300),m(),g(),f(),window.setInterval(function(){x(),p()},6e4)})};return{updateComponents:p,init:M}}),requirejs.config({baseUrl:"/javascripts",paths:{TerraMA2WC:"/externals/TerraMA2WebComponents/javascripts"}}),requirejs(["BDQueimadas","components/Utils","components/Filter","components/AttributesTable","components/Graphics","components/Map","TerraMA2WC/TerraMA2WebComponents","TerraMA2WC/components/LayerExplorer.TerraMA2WebComponents","TerraMA2WC/components/MapDisplay.TerraMA2WebComponents"],function(t,e,o,a,n,i,r,s,l){r.init(),s.init(),l.init(),l.addBaseLayers("bases","Camadas Bases")&&s.addLayersFromMap("bases","terrama2-layerexplorer"),l.disableDoubleClickZoom(),l.addMousePosition(),l.addScale(),e.init(configurations),t.init(),o.init(),a.init(),n.init(),i.init(),t.updateComponents()}),$("#about-btn").on("click",function(){$("#about-dialog").dialog({width:800,height:900,modal:!0,resizable:!1,draggable:!1,closeOnEscape:!0,closeText:"",position:{my:"top",at:"top+15"}})}),define("Startup",function(){});